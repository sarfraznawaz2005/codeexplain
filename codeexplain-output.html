<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Explanation: src</title>
    <!-- Critical CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/cupertino.min.css">
    
    <!-- Critical JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <style>
    /* Sidebar styles */
#sidebar a:hover {
    background-color: rgba(0, 123, 255, 0.1);
    color: #0056b3;
}

#sidebar a.active {
    background-color: #007bff;
    color: white;
}

#sidebar .folder-toggle:hover {
    background-color: rgba(0, 123, 255, 0.1);
    color: #0056b3;
}

/* Sidebar list styling */
#sidebar ul {
    list-style: none;
    line-height: 1.3;
}

#sidebar li {
    list-style: none;
}

/* Main content typography and styling */
.explanation-content {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    color: #495057;
}

.explanation-content h1,
.explanation-content h2,
.explanation-content h3,
.explanation-content h4,
.explanation-content h5,
.explanation-content h6 {
    color: #212529;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    line-height: 1.3;
}

.explanation-content h1 {
    font-size: 1.75rem;
}

.explanation-content h2 {
    font-size: 1.5rem;
}

.explanation-content h3 {
    font-size: 1.25rem;
}

.explanation-content h4 {
    font-size: 1.1rem;
}

.explanation-content h5 {
    font-size: 1rem;
}

.explanation-content h6 {
    font-size: 0.9rem;
}

.explanation-content p {
    margin-bottom: 1rem;
    line-height: 1.7;
    text-align: justify;
}

.explanation-content ul,
.explanation-content ol {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
}

.explanation-content li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
}

.explanation-content li p {
    margin-bottom: 0.5rem;
}

.explanation-content code {
    background-color: #f8f9fa;
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    color: #d73a49;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
}

.explanation-content pre {
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 0.375rem;
    padding: 1rem;
    margin: 1rem 0;
    overflow-x: auto;
    font-size: 0.875rem;
    line-height: 1.5;
}

.explanation-content pre code {
    background-color: transparent;
    padding: 0;
    color: inherit;
    border: none;
}

/* Ensure highlight.js styles don't conflict */
.explanation-content pre.hljs {
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 0.375rem;
    padding: 1rem;
    margin: 1rem 0;
    overflow-x: auto;
    font-size: 0.875rem;
    line-height: 1.5;
}

/* Code block styling */
.code-container pre code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace !important;
}

/* Ensure highlight.js styles are applied to code container */
.code-container pre code.hljs {
    background: transparent;
    color: inherit;
}

.explanation-content blockquote {
    border-left: 4px solid #007bff;
    padding-left: 1rem;
    margin: 1.5rem 0;
    color: #6c757d;
    font-style: italic;
}

.explanation-content table {
    width: 100%;
    margin-bottom: 1rem;
    border-collapse: collapse;
}

.explanation-content th,
.explanation-content td {
    padding: 0.75rem;
    border: 1px solid #dee2e6;
    text-align: left;
}

.explanation-content th {
    background-color: #f8f9fa;
    font-weight: 600;
}

.explanation-content strong {
    font-weight: 600;
    color: #212529;
}

.explanation-content em {
    font-style: italic;
    color: #495057;
}

/* Card improvements */
.card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* File name hover cursor */
.toggle-code:hover {
    cursor: pointer;
}

/* Navigation arrows */
#nav-arrows {
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

#nav-arrows:hover {
    opacity: 1;
}

/* Zoom controls */
.btn-group .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-group .btn {
    transition: all 0.2s ease;
}

.btn-group .btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Mermaid diagram controls */
.mermaid-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    position: relative;
    z-index: 10;
    /* Ensure controls are above the diagram */
    contain: layout style;
    /* Isolate controls from diagram transforms */
}

.mermaid-controls .btn {
    padding: 6px 12px;
    font-size: 0.875rem;
    border-radius: 6px;
}

.zoom-level {
    font-weight: 600;
    color: #495057;
    min-width: 60px;
    text-align: center;
}

/* Responsive mermaid containers */
.mermaid-diagram-container {
    position: relative;
    overflow: hidden;
    /* Ensure diagram doesn't overflow container */
    border-radius: 8px;
    border: 1px solid #dee2e6;
    background: white;
    min-height: 200px;
    contain: layout;
    /* Isolate layout calculations */
}

.mermaid {
    display: block;
    width: 100%;
    min-height: 200px;
    cursor: grab;
    transition: transform 0.1s ease;
    position: relative;
    z-index: 1;
    /* Ensure diagram is below controls */
    contain: layout style paint;
    /* Isolate diagram from controls */
}

.mermaid svg {
    width: 100%;
    height: auto;
    min-height: 200px;
}

.mermaid.dragging {
    cursor: grabbing;
}

.mermaid-zoomable {
    transform-origin: center center;
}

/* Fullscreen mode */
.mermaid-fullscreen {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: white !important;
    z-index: 9999 !important;
    padding: 20px !important;
    box-sizing: border-box !important;
}

.mermaid-fullscreen svg {
    width: 100% !important;
    height: 100% !important;
}

.fullscreen-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.8);
    z-index: 9998;
    display: none;
}

.fullscreen-overlay.active {
    display: block;
}

/* Responsive breakpoints for diagrams */
@media (max-width: 768px) {
    .mermaid-diagram-container {
        min-height: 150px;
    }

    .mermaid svg {
        min-height: 150px;
    }

    .mermaid-controls {
        flex-wrap: wrap;
        gap: 5px;
    }

    .mermaid-controls .btn {
        padding: 4px 8px;
        font-size: 0.75rem;
    }
}
    </style>

    <script>
    (function () {
    // Constants for configuration
    const SIDEBAR_DEFAULT_WIDTH = 280;
    const SIDEBAR_MIN_WIDTH = 250;
    const SIDEBAR_MAX_WIDTH = 450;
    const MOBILE_BREAKPOINT = 768;
    const COPY_FEEDBACK_DURATION = 2000;

    // Cache DOM elements and other state (assigned in DOMContentLoaded)
    let cachedFileEntries;
    let cachedSidebarLinks;

    // Initialize syntax highlighting
    document.addEventListener('DOMContentLoaded', function () {
        // Configure marked to use highlight.js for code blocks (after marked is loaded)
        const { Marked } = window.marked;
        const { markedHighlight } = window.markedHighlight;

        // Create Marked instance with the highlight plugin
        const markedInstance = new Marked(
            { gfm: true },
            markedHighlight({
                langPrefix: 'hljs language-',
                emptyLangClass: 'hljs',
                highlight(code, lang) {
                    const language = hljs.getLanguage(lang) ? lang : 'plaintext';
                    return hljs.highlight(code, { language }).value;
                }
            })
        );

        // Apply syntax highlighting to code blocks in AI explanations
        if (typeof hljs !== 'undefined') {
            document.querySelectorAll('.explanation-content pre code').forEach((block) => {
                if (!block.classList.contains('hljs')) {
                    hljs.highlightElement(block);
                }
            });
        }

        // Cache DOM elements - convert NodeList to Array for better performance
        cachedFileEntries = Array.from(document.querySelectorAll('.file-entry'));
        cachedSidebarLinks = document.querySelectorAll('#sidebar a[href^=\"#file-\"]');
        
        // If no sidebar exists, set to empty NodeList to prevent errors
        if (cachedSidebarLinks.length === 0) {
            cachedSidebarLinks = [];
        }

        // Initialize layout
        initializeLayout();

        // Initial active item update
        updateActiveSidebarItem();

        // Update navigation arrows
        updateNavigationArrows();

        // Function to toggle folder icons
        function toggleFolderIcon(folderToggle, force) {
            const folderContents = folderToggle.nextElementSibling;
            const folderIcon = folderToggle.querySelector('.folder-icon');
            const isExpanded = force !== undefined ? force : !folderContents.classList.contains('d-none');

            if (isExpanded) {
                folderIcon.classList.remove('fa-chevron-right');
                folderIcon.classList.add('fa-chevron-down');
            } else {
                folderIcon.classList.remove('fa-chevron-down');
                folderIcon.classList.add('fa-chevron-right');
            }
        }

        // Initialize folder icons for expanded folders
        document.querySelectorAll('.folder-toggle').forEach(toggle => {
            const folderContents = toggle.nextElementSibling;
            if (folderContents && !folderContents.classList.contains('d-none')) {
                toggleFolderIcon(toggle, true);
            }
        });

        // Code folding
        document.addEventListener('click', function (e) {
            if (e.target.closest('.toggle-code')) {
                const toggleElement = e.target.closest('.toggle-code');
                const codeContainer = toggleElement.closest('.file-entry').querySelector('.code-container');
                const icon = toggleElement.querySelector('i');

                if (codeContainer.classList.contains('d-none')) {
                    codeContainer.classList.remove('d-none');
                    icon.classList.remove('fa-chevron-right');
                    icon.classList.add('fa-chevron-down');
                } else {
                    codeContainer.classList.add('d-none');
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-right');
                }
            }
        });

        // Copy explanation functionality
        document.addEventListener('click', function (e) {
            if (e.target.closest('.copy-explanation')) {
                const button = e.target.closest('.copy-explanation');
                const explanationContainer = button.closest('.file-entry').querySelector('.explanation-content');
                const explanationText = explanationContainer.textContent.trim();

                navigator.clipboard.writeText(explanationText).then(() => {
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        button.innerHTML = originalText;
                    }, COPY_FEEDBACK_DURATION);
                });
            }
        });


        // Sidebar navigation and folder toggle
        document.addEventListener('click', function (e) {
            if (e.target.closest('a[href^="#file-"]')) {
                e.preventDefault();
                const targetId = e.target.closest('a').getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            }

            // Folder toggle functionality
            if (e.target.closest('.folder-toggle')) {
                const folderToggle = e.target.closest('.folder-toggle');
                const folderContents = folderToggle.nextElementSibling;
                folderContents.classList.toggle('d-none');
                toggleFolderIcon(folderToggle);
            }
        });

        // Sidebar toggle functionality
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.querySelector('main');

        if (sidebarToggle && sidebar && mainContent) {
            sidebarToggle.addEventListener('click', () => {
                const isCollapsed = sidebar.style.transform === 'translateX(-100%)';
                if (window.innerWidth <= 768) {
                    // Mobile: toggle between collapsed and expanded
                    if (isCollapsed) {
                        sidebar.style.transform = 'translateX(0)';
                        sidebar.style.opacity = '1';
                        sidebar.style.pointerEvents = 'auto';
                        mainContent.style.marginLeft = '280px';
                    } else {
                        sidebar.style.transform = 'translateX(-100%)';
                        sidebar.style.opacity = '0';
                        sidebar.style.pointerEvents = 'none';
                        mainContent.style.marginLeft = '0';
                    }
                }
            });
        }

        // Sidebar drag resizing
        const sidebarResizer = document.getElementById('sidebar-resizer');
        let isResizing = false;
        let startX = 0;
        let startWidth = 0;
        let animationFrameId = null;

        if (sidebarResizer && sidebar && mainContent) {
            sidebarResizer.addEventListener('mousedown', (e) => {
                isResizing = true;
                startX = e.clientX;
                startWidth = sidebar.offsetWidth;
                document.body.style.cursor = 'ew-resize';
                document.body.style.userSelect = 'none';
            });

            document.addEventListener('mousemove', (e) => {
                if (!isResizing) return;

                // Cancel any pending animation frame
                if (animationFrameId !== null) {
                    cancelAnimationFrame(animationFrameId);
                }

                // Schedule update on next animation frame
                animationFrameId = requestAnimationFrame(() => {
                    const newWidth = startWidth + (e.clientX - startX);
                    const clampedWidth = Math.max(SIDEBAR_MIN_WIDTH, Math.min(SIDEBAR_MAX_WIDTH, newWidth));

                    sidebar.style.width = `${clampedWidth}px`;
                    mainContent.style.marginLeft = `${clampedWidth}px`;
                    mainContent.style.width = `calc(100% - ${clampedWidth}px)`;
                    animationFrameId = null;
                });
            });

            document.addEventListener('mouseup', () => {
                if (isResizing) {
                    isResizing = false;
                    document.body.style.cursor = '';
                    document.body.style.userSelect = '';
                }
            });
        }

        // Handle window resize using the shared layout function
        window.addEventListener('resize', () => {
            applyLayoutStyles(window.innerWidth <= MOBILE_BREAKPOINT);
        });

        // Navigation arrow event listeners
        const prevFileBtn = document.getElementById('prev-file');
        const nextFileBtn = document.getElementById('next-file');
        
        if (prevFileBtn && nextFileBtn) {
            prevFileBtn.addEventListener('click', () => {
                const currentFile = getCurrentVisibleFile();
                const prevFile = getPreviousFile(currentFile);
                if (prevFile) {
                    prevFile.scrollIntoView({ behavior: 'smooth' });
                }
            });

            nextFileBtn.addEventListener('click', () => {
                const currentFile = getCurrentVisibleFile();
                const nextFile = getNextFile(currentFile);
                if (nextFile) {
                    nextFile.scrollIntoView({ behavior: 'smooth' });
                }
            });
        }

        // Use requestAnimationFrame for smoother scroll performance
        let isScrolling = false;
        window.addEventListener('scroll', function () {
            if (!isScrolling) {
                window.requestAnimationFrame(function () {
                    updateActiveSidebarItem();
                    isScrolling = false;
                });
                isScrolling = true;
            }
        });

    });

    // Shared function to apply layout styles based on screen size
    function applyLayoutStyles(isMobile) {
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const mainContent = document.querySelector('main');

        // If sidebar doesn't exist (e.g., in flowchart, architecture, or onboarding mode), just return
        if (!sidebar) {
            // In special modes, ensure main content takes full width
            if (mainContent) {
                mainContent.style.marginLeft = '0';
                mainContent.style.width = '100%';
            }
            return;
        }

        if (isMobile) {
            if (sidebarToggle) {
                sidebarToggle.classList.remove('d-none');
            }
            if (sidebar.style.transform !== 'translateX(-100%)') {
                sidebar.style.transform = 'translateX(-100%)';
                sidebar.style.opacity = '0';
                sidebar.style.pointerEvents = 'none';
                if (mainContent) {
                    mainContent.style.marginLeft = '0';
                    mainContent.style.width = '100%';
                }
            }
        } else {
            if (sidebarToggle) {
                sidebarToggle.classList.add('d-none');
            }
            sidebar.style.transform = 'translateX(0)';
            sidebar.style.opacity = '1';
            sidebar.style.pointerEvents = 'auto';
            const currentWidth = sidebar.offsetWidth || SIDEBAR_DEFAULT_WIDTH;
            if (mainContent) {
                mainContent.style.marginLeft = `${currentWidth}px`;
                mainContent.style.width = `calc(100% - ${currentWidth}px)`;
            }
        }
    }

    // Initialize layout on page load
    function initializeLayout() {
        applyLayoutStyles(window.innerWidth <= MOBILE_BREAKPOINT);
    }

    // Helper function to find the most visible element from a list of elements
    function getMostVisibleElement(elements) {
        let mostVisibleElement = null;
        let maxVisibility = 0;

        elements.forEach(element => {
            const rect = element.getBoundingClientRect();
            const windowHeight = window.innerHeight;

            // Calculate how much of the element is visible
            const visibleTop = Math.max(0, rect.top);
            const visibleBottom = Math.min(windowHeight, rect.bottom);
            const visibleHeight = Math.max(0, visibleBottom - visibleTop);
            const visibility = visibleHeight / rect.height;

            if (visibility > maxVisibility) {
                maxVisibility = visibility;
                mostVisibleElement = element;
            }
        });

        return mostVisibleElement;
    }

    // Auto-sync sidebar with scroll position
    function updateActiveSidebarItem() {
        // Remove active class from all sidebar links if they exist
        if (cachedSidebarLinks && cachedSidebarLinks.length > 0) {
            cachedSidebarLinks.forEach(link => link.classList.remove('active'));

            // Find which file entry is currently most visible
            const mostVisibleEntry = getMostVisibleElement(cachedFileEntries);

            // Highlight the corresponding sidebar item
            if (mostVisibleEntry) {
                const fileIndex = mostVisibleEntry.getAttribute('data-file-index');
                const correspondingLink = document.querySelector('#sidebar a[href="#file-' + fileIndex + '"]');
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                }
            }
        }
    }

    // Navigation arrow functionality
    function getCurrentVisibleFile() {
        return getMostVisibleElement(cachedFileEntries);
    }

    function getPreviousFile(currentFile) {
        if (!currentFile) return null;
        const currentIndex = cachedFileEntries.indexOf(currentFile);
        return currentIndex > 0 ? cachedFileEntries[currentIndex - 1] : null;
    }

    function getNextFile(currentFile) {
        if (!currentFile) return null;
        const currentIndex = cachedFileEntries.indexOf(currentFile);
        return currentIndex < cachedFileEntries.length - 1 ? cachedFileEntries[currentIndex + 1] : null;
    }

    // Show/hide navigation arrows based on file count
    function updateNavigationArrows() {
        const fileCount = cachedFileEntries.length;
        const navArrows = document.getElementById('nav-arrows');
        
        // If navArrows element doesn't exist (e.g., in architecture, onboarding, or flowchart modes), return
        if (!navArrows) {
            return;
        }
        
        if (fileCount > 1) {
            navArrows.classList.remove('d-none');
        } else {
            navArrows.classList.add('d-none');
        }
    }

})();

    
    </script>    
</head>
    <body class="bg-light text-dark" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;">
    <div id="app" class="vh-100">
        <!-- Header -->
        <header class="bg-white shadow-sm position-fixed top-0 start-0 w-100 border-bottom" style="z-index: 1030; backdrop-filter: blur(10px); background-color: rgba(255, 255, 255, 0.95);">
            <div class="container-fluid py-3 px-4">
                <div class="row align-items-center">
                    <div class="col-auto d-flex align-items-center">
                        <i class="fas fa-code text-primary me-3 fs-4"></i>
                         <h1 class="h5 fw-bold text-dark mb-0">Code Explanation: <span class="text-primary fw-semibold">src</span></h1>
                    </div>
                    <div class="col text-center d-none d-md-block">
                        <small class="text-muted">AI-Powered Code Explanation</small>
                    </div>

                </div>
            </div>
        </header>


        

        <!-- Main Content -->
        <main style="margin-left: 0px; width: 100%; margin-top: 96px; padding: 2rem; transition: margin-left 0.3s ease; min-height: calc(100vh - 96px);">
            <div class="container-fluid">
                <!-- File Entries -->
                <div id="file-entries" class="row g-4">
                    
<div class="file-entry col-12 mb-4" id="file-0" data-file-path="developer-onboarding" data-file-index="0">
    <div class="card shadow-sm border-0 h-100" style="border-radius: 12px; overflow: hidden;">
        <div class="card-header bg-gradient-primary text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; padding: 1rem 1.5rem;">
            <div class="d-flex justify-content-between align-items-center">
                <h2 class="toggle-code h5 fw-semibold mb-0 cursor-pointer d-flex align-items-center text-white" data-file-index="0" style="font-size: 1.1rem;">
                    <i class="fas fa-chevron-right me-2 transition-transform duration-200"></i>
                    <i class="fas fa-file-code me-2"></i>
                    Developer Onboarding
                </h2>
                <span class="badge bg-white bg-opacity-25 text-white px-2 py-1" style="font-size: 0.75rem;">
                    arch
                </span>
            </div>
        </div>

        <div class="card-body p-0">
              <div class="code-container bg-light border-bottom d-none" style="max-height: 400px; overflow: auto;">
                  <div class="p-3">
                      <pre class="mb-0"><code class="language-arch" style="font-size: 0.9rem; line-height: 1.5;">
# Codebase Summary

## Project Structure

### ai

- **aiEngine.js** (javascript): The `aiEngine.js` file defines the `AIEngine` class, which orchestrates code analysis and explanation using various AI models. It supports multiple AI providers (Google Gemini, OpenAI, and Ollama) for generating code explanations in different modes (e.g., summary, architecture). The engine manages API interactions, caching, and token usage while performing codebase analysis and generating explanations. It utilizes `CacheManager` and `PromptManager` classes for caching and prompt handling, respectively. The class includes error management and retry logic with exponential backoff. Overall, it serves as a utility for automated code documentation and analysis in development environments.
- **promptManager.js** (javascript): ```markdown
The `promptManager.js` file defines a `PromptManager` class responsible for handling prompt templates for code explanations. It manages default and user-specific prompt directories, ensuring user directories exist and copying default prompts if custom versions don&#x27;t exist. The class provides methods to fetch prompts based on a specified mode, prioritizing user-defined prompts, with a fallback to default templates or a generic template if no match is found. It also includes functionality to render a prompt by replacing placeholders with provided variables. This system supports dynamic generation and customization of explanatory prompts for code files.
```

### commands

- **explain.js** (javascript): ```markdown
The `explain.js` script is part of the CodeExplain project located at `D:\MyDev\CodeExplain\src\commands\`. It provides a function to analyze and <span class="hljs-keyword">explain</span> code files <span class="hljs-keyword">using</span> AI-powered tools. It supports several modes including flowchart, architecture, <span class="hljs-keyword">and</span> onboarding, <span class="hljs-keyword">and</span> outputs results <span class="hljs-keyword">in</span> either PDF <span class="hljs-keyword">or</span> HTML formats. The script handles file <span class="hljs-keyword">path</span> inputs, loads configurations, validates inputs, <span class="hljs-keyword">and</span> manages settings <span class="hljs-keyword">via</span> CLI, environment, <span class="hljs-keyword">and</span> config files. It uses various components <span class="hljs-keyword">like</span> <span class="hljs-symbol">`CodeAnalyzer`</span>, <span class="hljs-symbol">`AIEngine`</span>, <span class="hljs-keyword">and</span> output generators, <span class="hljs-keyword">with</span> a focus <span class="hljs-keyword">on</span> explaining code through AI <span class="hljs-keyword">with</span> optional verbosity <span class="hljs-keyword">for</span> debug <span class="hljs-keyword">and</span> reporting.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

### core

- **cacheManager.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
The JavaScript file defines a <span class="hljs-symbol">`CacheManager`</span> class responsible <span class="hljs-keyword">for</span> managing cached explanations of code files. It creates cache <span class="hljs-keyword">keys</span> <span class="hljs-keyword">using</span> file paths <span class="hljs-keyword">and</span> configuration settings, storing explanation data <span class="hljs-keyword">in</span> JSON files <span class="hljs-keyword">within</span> a specific directory. The <span class="hljs-symbol">`initialize`</span> method ensures the cache directory <span class="hljs-keyword">exists</span>, <span class="hljs-keyword">while</span> <span class="hljs-symbol">`getCachedExplanation`</span> retrieves explanations <span class="hljs-keyword">if</span> the cached data <span class="hljs-keyword">is</span> still valid <span class="hljs-keyword">by</span> comparing file modification times <span class="hljs-keyword">and</span> hashes. The <span class="hljs-symbol">`setCachedExplanation`</span> method saves new explanations <span class="hljs-keyword">to</span> the cache. This mechanism optimizes explanation retrieval <span class="hljs-keyword">by</span> avoiding redundant computations <span class="hljs-keyword">in</span> a development environment.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **codeAnalyzer.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
The <span class="hljs-symbol">`codeAnalyzer.js`</span> file defines a <span class="hljs-symbol">`CodeAnalyzer`</span> class used <span class="hljs-keyword">for</span> analyzing code files <span class="hljs-keyword">within</span> a given <span class="hljs-keyword">path</span>. Its main functionality includes counting files, building file patterns <span class="hljs-keyword">to</span> <span class="hljs-keyword">include</span>/<span class="hljs-keyword">exclude</span> specific files, <span class="hljs-keyword">and</span> analyzing file contents. It uses globbing patterns <span class="hljs-keyword">to</span> handle directory contents <span class="hljs-keyword">and</span> can track analysis progress. The class also checks file extensions against a configured list <span class="hljs-keyword">for</span> inclusion, hashing the file content <span class="hljs-keyword">to</span> provide <span class="hljs-keyword">unique</span> identifiers, <span class="hljs-keyword">and</span> detecting file language. It integrates utilities such <span class="hljs-keyword">as</span> <span class="hljs-symbol">`fs-extra`</span> <span class="hljs-keyword">for</span> file operations <span class="hljs-keyword">and</span> <span class="hljs-symbol">`globby`</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">path</span> pattern matching, <span class="hljs-keyword">and</span> plays a <span class="hljs-keyword">role</span> <span class="hljs-keyword">in</span> processing large codebases efficiently.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

### config

- **configManager.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
The <span class="hljs-symbol">`configManager.js`</span> file defines a <span class="hljs-symbol">`ConfigManager`</span> class that handles configuration management <span class="hljs-keyword">for</span> a project. It sets default configuration <span class="hljs-keyword">values</span> <span class="hljs-keyword">and</span> allows loading, caching, <span class="hljs-keyword">and</span> saving of configuration files <span class="hljs-keyword">in</span> JSON format. The configuration includes settings <span class="hljs-keyword">like</span> model provider, file extensions, <span class="hljs-keyword">and</span> directories <span class="hljs-keyword">to</span> <span class="hljs-keyword">exclude</span>. It checks <span class="hljs-keyword">for</span> existing config files <span class="hljs-keyword">in</span> a designated directory, uses environment variables <span class="hljs-keyword">where</span> needed, <span class="hljs-keyword">and</span> provides backward compatibility <span class="hljs-keyword">for</span> model selection. This manager ensures that <span class="hljs-keyword">all</span> configuration-related operations are streamlined, maintaining consistency across the application.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

### flowchart

- **flowchartGenerator.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
The <span class="hljs-symbol">`flowchartGenerator.js`</span> file <span class="hljs-keyword">is</span> a JavaScript module that creates flowcharts representing code architecture <span class="hljs-keyword">and</span> dependencies of a project based <span class="hljs-keyword">on</span> code analysis. The <span class="hljs-symbol">`FlowchartGenerator`</span> class analyzes the structure of a project, identifies components <span class="hljs-keyword">and</span> their relationships, <span class="hljs-keyword">and</span> generates a textual <span class="hljs-keyword">and</span> graphical representation <span class="hljs-keyword">using</span> the Mermaid syntax. It highlights entry points, core components, functions, <span class="hljs-keyword">and</span> dependencies <span class="hljs-keyword">while</span> ensuring no sensitive information <span class="hljs-keyword">is</span> exposed. This module <span class="hljs-keyword">is</span> crucial <span class="hljs-keyword">for</span> visualizing project architecture, aiding <span class="hljs-keyword">in</span> understanding <span class="hljs-keyword">and</span> debugging complex systems.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

### utils

- **constants.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file defines <span class="hljs-keyword">and</span> exports a <span class="hljs-keyword">set</span> of constants used <span class="hljs-keyword">for</span> configuring explanation <span class="hljs-keyword">and</span> output modes. It includes modes <span class="hljs-keyword">for</span> different explanation types such <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;linebyline&#x27;</span>, <span class="hljs-string">&#x27;flowchart&#x27;</span>, <span class="hljs-string">&#x27;explain&#x27;</span>, <span class="hljs-string">&#x27;architecture&#x27;</span>, <span class="hljs-keyword">and</span> related aliases. Additionally, it specifies <span class="hljs-string">&#x27;pdf&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;html&#x27;</span> <span class="hljs-keyword">as</span> possible output formats. The file also sets a default <span class="hljs-keyword">value</span> of <span class="hljs-number">3</span> <span class="hljs-keyword">for</span> retry attempts. These constants likely serve <span class="hljs-keyword">as</span> configuration options <span class="hljs-keyword">in</span> a larger <span class="hljs-keyword">system</span> that generates explanations <span class="hljs-keyword">or</span> documentation <span class="hljs-keyword">in</span> various formats <span class="hljs-keyword">and</span> styles.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **languageMap.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file defines <span class="hljs-keyword">and</span> exports <span class="hljs-symbol">`languageMap`</span>, an <span class="hljs-keyword">object</span> <span class="hljs-keyword">mapping</span> file extensions <span class="hljs-keyword">to</span> corresponding programming languages. It serves <span class="hljs-keyword">as</span> a utility <span class="hljs-keyword">for</span> identifying the programming language of a file based <span class="hljs-keyword">on</span> its extension. The <span class="hljs-keyword">map</span> covers a wide range of languages <span class="hljs-keyword">and</span> extensions, <span class="hljs-keyword">is</span> part of a utility library, <span class="hljs-keyword">and</span> could be used <span class="hljs-keyword">in</span> larger systems <span class="hljs-keyword">for</span> tasks <span class="hljs-keyword">like</span> syntax highlighting, file parsing, <span class="hljs-keyword">or</span> language-specific processing.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **utils.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file, <span class="hljs-symbol">`utils.js`</span>, provides a <span class="hljs-keyword">collection</span> of utility functions <span class="hljs-keyword">for</span> the CodeExplain project. It includes functions <span class="hljs-keyword">for</span> <span class="hljs-keyword">string</span> manipulation (<span class="hljs-built_in">e</span>.g., <span class="hljs-symbol">`escapeHtml`</span>, <span class="hljs-symbol">`camelToKebab`</span>, <span class="hljs-symbol">`capitalizeFirstLetter`</span>), file <span class="hljs-keyword">path</span> handling (<span class="hljs-built_in">e</span>.g., <span class="hljs-symbol">`getFileExtension`</span>, <span class="hljs-symbol">`getFileNameWithoutExtension`</span>), list <span class="hljs-keyword">and</span> <span class="hljs-keyword">object</span> handling (<span class="hljs-symbol">`deepMerge`</span>, <span class="hljs-symbol">`arrayToHumanReadableList`</span>), <span class="hljs-keyword">and</span> miscellaneous tasks <span class="hljs-keyword">like</span> generating <span class="hljs-keyword">unique</span> IDs <span class="hljs-keyword">and</span> formatting dates <span class="hljs-keyword">and</span> bytes. These utilities simplify common operations such <span class="hljs-keyword">as</span> escaping characters, managing paths, <span class="hljs-keyword">and</span> data formatting <span class="hljs-keyword">for</span> broader <span class="hljs-keyword">use</span> <span class="hljs-keyword">within</span> the project, enhancing code readability <span class="hljs-keyword">and</span> maintainability.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

### output/html

- **htmlOutput.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
The <span class="hljs-symbol">`htmlOutput.js`</span> file <span class="hljs-keyword">is</span> responsible <span class="hljs-keyword">for</span> generating an HTML representation of code analysis <span class="hljs-keyword">and</span> explanations. It utilizes libraries <span class="hljs-keyword">like</span> <span class="hljs-symbol">`marked`</span> <span class="hljs-keyword">for</span> Markdown parsing <span class="hljs-keyword">and</span> <span class="hljs-symbol">`highlight.js`</span> <span class="hljs-keyword">for</span> syntax highlighting. The <span class="hljs-symbol">`HTMLOutput`</span> class constructs an HTML page <span class="hljs-keyword">with</span> features <span class="hljs-keyword">like</span> syntax-highlighted code blocks, a sidebar navigation tree, <span class="hljs-keyword">and</span> explanations of analyzed files, supporting both Mermaid diagrams <span class="hljs-keyword">and</span> Markdown. Additional functionality includes <span class="hljs-keyword">path</span> normalization, <span class="hljs-built_in">title</span> modification <span class="hljs-keyword">with</span> labels, <span class="hljs-keyword">and</span> HTML asset loading. This script <span class="hljs-keyword">is</span> used <span class="hljs-keyword">in</span> transforming code analysis results <span class="hljs-keyword">into</span> a visually engaging HTML format, primarily <span class="hljs-keyword">for</span> documentation purposes.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **htmlTemplate.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file generates an HTML template <span class="hljs-keyword">for</span> displaying AI-powered code explanations. The <span class="hljs-symbol">`createHTMLTemplate`</span> <span class="hljs-keyword">function</span> constructs a complete HTML document, including critical CSS/JS, <span class="hljs-keyword">and</span> customizable sidebar <span class="hljs-keyword">and</span> file entry sections based <span class="hljs-keyword">on</span> the given configuration. It adapts layout elements based <span class="hljs-keyword">on</span> different modes such <span class="hljs-keyword">as</span> flowchart <span class="hljs-keyword">or</span> architecture. The <span class="hljs-symbol">`loadHTMLAssets`</span> <span class="hljs-keyword">function</span> asynchronously loads external CSS <span class="hljs-keyword">and</span> JavaScript files required <span class="hljs-keyword">for</span> rendering, optionally including additional flowchart scripts. This file serves <span class="hljs-keyword">as</span> a utility <span class="hljs-keyword">to</span> render formatted HTML pages <span class="hljs-keyword">for</span> code explanation purposes <span class="hljs-keyword">in</span> the larger CodeExplain <span class="hljs-keyword">system</span>.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **_css.css** (css): `</span><span class="hljs-symbol">``</span>markdown
This CSS file styles an HTML document, focusing <span class="hljs-keyword">on</span> sidebars, main content, code blocks, <span class="hljs-keyword">and</span> responsive elements, particularly <span class="hljs-keyword">for</span> displaying Mermaid diagrams. It provides hover effects, typography styles <span class="hljs-keyword">for</span> various headings, paragraphs, <span class="hljs-keyword">and</span> lists <span class="hljs-keyword">within</span> the <span class="hljs-symbol">`.explanation-content`</span> class, <span class="hljs-keyword">and</span> applies specific designs <span class="hljs-keyword">for</span> interactive elements <span class="hljs-keyword">like</span> buttons <span class="hljs-keyword">and</span> navigation arrows. The file also includes styles <span class="hljs-keyword">for</span> Mermaid diagrams, ensuring they are responsive, zoomable, <span class="hljs-keyword">and</span> can toggle fullscreen views. <span class="hljs-keyword">Key</span> features are the enhancement of readability, <span class="hljs-keyword">user</span> interaction, <span class="hljs-keyword">and</span> maintaining layout consistency <span class="hljs-keyword">for</span> both code <span class="hljs-keyword">and</span> diagram displays.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **_flowchart.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file manages the rendering <span class="hljs-keyword">and</span> interaction features, such <span class="hljs-keyword">as</span> zoom <span class="hljs-keyword">and</span> fullscreen, <span class="hljs-keyword">for</span> Mermaid.js diagrams <span class="hljs-keyword">in</span> an HTML document. It initializes Mermaid <span class="hljs-keyword">with</span> specified settings, processes <span class="hljs-keyword">and</span> renders diagrams identified <span class="hljs-keyword">by</span> the <span class="hljs-string">&quot;mermaid&quot;</span> class, <span class="hljs-keyword">and</span> adds interactive controls (zoom <span class="hljs-keyword">in</span>/out, reset, <span class="hljs-keyword">and</span> fullscreen) <span class="hljs-keyword">to</span> <span class="hljs-keyword">each</span> diagram. The file supports various input methods including mouse <span class="hljs-keyword">and</span> touch <span class="hljs-keyword">for</span> zoom <span class="hljs-keyword">and</span> pan actions, ensuring dynamic <span class="hljs-keyword">and</span> responsive flowchart interactions. Additionally, it maintains state <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> diagram <span class="hljs-keyword">to</span> facilitate these interactions <span class="hljs-keyword">and</span> handles invalid <span class="hljs-keyword">or</span> empty content <span class="hljs-keyword">with</span> warnings.
<span class="hljs-symbol">``</span><span class="hljs-symbol">`
- **_js.js** (javascript): `</span><span class="hljs-symbol">``</span>markdown
This JavaScript file manages the UI interactions <span class="hljs-keyword">for</span> a web application <span class="hljs-keyword">with</span> a collapsible sidebar, syntax-highlighted code blocks, <span class="hljs-keyword">and</span> navigation functionality. It initializes syntax highlighting <span class="hljs-keyword">using</span> the <span class="hljs-symbol">`highlight.js`</span> library, provides folder icon toggling <span class="hljs-keyword">and</span> file entry folding, implements clipboard copy features, <span class="hljs-keyword">and</span> manages the sidebar<span class="hljs-string">&#x27;s resizing and mobile responsiveness. It synchronizes the sidebar with the current scroll position to highlight the active file and offers previous/next file navigation using visible file elements. The file aims to enhance interactivity and usability of a documentation or code-explanation web interface.
```

### output/pdf

- **pdfOutput.js** (javascript): ```markdown
The JavaScript file `pdfOutput.js` is designed to convert code explanations into a formatted PDF document. It utilizes Puppeteer to render HTML content, which includes code snippets and explanations, into a PDF file. The file supports markdown and Mermaid diagrams, providing syntax highlighting via highlight.js. The class `PDFOutput` manages the configuration and generation process, including HTML generation, code content rendering with markdown parsing, and PDF formatting with specific page configurations. It outputs a PDF document to a designated path, summarizing code explanations for easy sharing and documentation.
```

## Technology Stack

- **Languages**: javascript, css
- **File Types**: .js, .css

## Key Files Content

### config/configManager.js

```javascript
const path = require(&#x27;</span><span class="hljs-keyword">path</span><span class="hljs-string">&#x27;);
const fs = require(&#x27;</span>fs-extra<span class="hljs-string">&#x27;);

// Configuration constants
const CONFIG_DEFAULTS = {
  GEMINI_MODEL: &#x27;</span>gemini<span class="hljs-number">-2.5</span>-flash<span class="hljs-string">&#x27;,
  OPENAI_MODEL: &#x27;</span>gpt<span class="hljs-number">-4</span>o<span class="hljs-string">&#x27;,
  RETRY_ATTEMPTS: 3,
  RETRY_DELAY: 1000,
  JSON_INDENT_SPACES: 2
};

const CONFIG_DIR_NAME = &#x27;</span>.codeexplain<span class="hljs-string">&#x27;;
const CONFIG_FILE_NAME = &#x27;</span>config.json<span class="hljs-string">&#x27;;

class ConfigManager {
  #codeExplainDir;

  constructor(configPath) {
    this.configPath = configPath;
    this.#codeExplainDir = path.join(process.cwd(), CONFIG_DIR_NAME);
    this.defaultConfig = {
      provider: &#x27;</span>gemini<span class="hljs-string">&#x27;,
      model: &#x27;</span>gemini<span class="hljs-number">-2.5</span>-flash<span class="hljs-string">&#x27;,
      output: &#x27;</span>html<span class="hljs-string">&#x27;,
      mode: &#x27;</span><span class="hljs-keyword">explain</span><span class="hljs-string">&#x27;,
      level: &#x27;</span>beginner<span class="hljs-string">&#x27;,
      maxTokens: 15000,
      baseUrl: null, // For Ollama or custom OpenAI endpoints
      retry: {
        attempts: CONFIG_DEFAULTS.RETRY_ATTEMPTS,
        delay: CONFIG_DEFAULTS.RETRY_DELAY
      },
      codeExtensions: [
        // Web Development
        &#x27;</span>.js<span class="hljs-string">&#x27;, &#x27;</span>.jsx<span class="hljs-string">&#x27;, &#x27;</span>.ts<span class="hljs-string">&#x27;, &#x27;</span>.tsx<span class="hljs-string">&#x27;, &#x27;</span>.vue<span class="hljs-string">&#x27;, &#x27;</span>.svelte<span class="hljs-string">&#x27;, &#x27;</span>.astro<span class="hljs-string">&#x27;,
        &#x27;</span>.html<span class="hljs-string">&#x27;, &#x27;</span>.h
... (truncated)
<span class="hljs-symbol">``</span><span class="hljs-symbol">`

</span>
                      </code></pre>
                  </div>
              </div>

            <div class="p-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="h6 text-muted mb-0 d-flex align-items-center">
                        <i class="fas fa-brain me-2 text-primary"></i>
                        AI Explanation
                    </h3>
                    <button class="btn btn-outline-primary btn-sm copy-explanation" data-file-index="0" title="Copy explanation">
                        <i class="fas fa-copy me-1"></i> Copy
                    </button>
                </div>
                <div class="explanation-content">
                    <h1>Codebase Architecture Overview</h1>
<p>The CodeExplain project is a robust system designed to analyze, document, and visually represent codebases using AI-powered tools. Below, we dissect the architecture of the project, detailing the roles of specific components, data flows, and the project&#39;s overall organization.</p>
<h2>Overview</h2>
<h3>Main Objective</h3>
<p>The primary goal of this codebase is to analyze code projects and provide explanations, flowcharts, and documentation using AI models. The system can generate outputs in various formats, such as HTML and PDF, and supports multiple AI providers like Google Gemini, OpenAI, and Ollama.</p>
<h3>Technology Stack</h3>
<ul>
<li><strong>Languages</strong>: JavaScript, CSS</li>
<li><strong>Frameworks/Libraries</strong>: Node.js, Mermaid.js, Highlight.js, Puppeteer</li>
</ul>
<h2>Project Structure and Components</h2>
<h3>AI Module</h3>
<h4><code>ai/aiEngine.js</code></h4>
<p><strong>AIEngine Class</strong></p>
<pre><code class="language-javascript">class AIEngine {
  // Manages AI model interaction
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Manages interactions with AI providers to generate explanations and documentation. It handles API communication, manages caching via <code>CacheManager</code>, and prompts using <code>PromptManager</code>. Supports error management and retry mechanisms.</li>
<li><strong>Key Interactions</strong>: Utilizes <code>CacheManager</code> for caching responses and <code>PromptManager</code> for managing prompt templates.</li>
</ul>
<h4><code>ai/promptManager.js</code></h4>
<p><strong>PromptManager Class</strong></p>
<pre><code class="language-javascript">class PromptManager {
  // Manages prompt templates
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Handles loading and customizing prompt templates for AI explanations. Supports default and user-specific templates and rendering templates with placeholders.</li>
<li><strong>Key Interactions</strong>: Interfaces directly with <code>AIEngine</code> to provide templates needed for generating explanations.</li>
</ul>
<h3>Core Module</h3>
<h4><code>core/cacheManager.js</code></h4>
<p><strong>CacheManager Class</strong></p>
<pre><code class="language-javascript">class CacheManager {
  // Manages explanation caching
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Caches and retrieves code explanations to optimize performance and reduce redundant computations.</li>
<li><strong>Key Interactions</strong>: Works closely with <code>AIEngine</code> to save and retrieve explanations.</li>
</ul>
<h4><code>core/codeAnalyzer.js</code></h4>
<p><strong>CodeAnalyzer Class</strong></p>
<pre><code class="language-javascript">class CodeAnalyzer {
  // Analyzes code files
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Analyzes code files, counts files, and builds patterns to include/exclude files during analysis. Detects file languages and unique identifiers using file hashes.</li>
<li><strong>Key Interactions</strong>: Provides processed data to <code>AIEngine</code> for further AI analysis.</li>
</ul>
<h3>Command Module</h3>
<h4><code>commands/explain.js</code></h4>
<pre><code class="language-javascript">function analyzeAndExplain() {
  // Entry point for explaining code
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Main CLI interface for analyzing and explaining code files. It loads configurations, validates inputs, and handles verbosity for debugging. Acts as the entry point for the code explanation workflow.</li>
</ul>
<h3>Config Module</h3>
<h4><code>config/configManager.js</code></h4>
<p><strong>ConfigManager Class</strong></p>
<pre><code class="language-javascript">class ConfigManager {
  // Manages application configuration
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Handles loading, caching, and saving of configuration files. Manages model provider settings, file extensions, and exclusions.</li>
<li><strong>Key Interactions</strong>: Provides configuration data to <code>AIEngine</code>, <code>CodeAnalyzer</code>, and other components.</li>
</ul>
<h3>Flowchart Module</h3>
<h4><code>flowchart/flowchartGenerator.js</code></h4>
<p><strong>FlowchartGenerator Class</strong></p>
<pre><code class="language-javascript">class FlowchartGenerator {
  // Generates code flowcharts
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Analyzes project structure to generate flowcharts using Mermaid syntax. Visualizes components and relationships.</li>
<li><strong>Key Interactions</strong>: Used primarily for visual representation within the HTML output.</li>
</ul>
<h3>Utilities Module</h3>
<h4><code>utils/constants.js</code></h4>
<pre><code class="language-javascript">const MODES = [&#39;linebyline&#39;, &#39;flowchart&#39;, &#39;explain&#39;, &#39;architecture&#39;];
const OUTPUT_FORMATS = [&#39;pdf&#39;, &#39;html&#39;];
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Defines constants used across the system for modes and outputs.</li>
</ul>
<h4><code>utils/languageMap.js</code></h4>
<pre><code class="language-javascript">const languageMap = {
  &#39;.js&#39;: &#39;JavaScript&#39;,
  &#39;.ts&#39;: &#39;TypeScript&#39;,
  // More mappings
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Maps file extensions to programming languages.</li>
</ul>
<h4><code>utils/utils.js</code></h4>
<pre><code class="language-javascript">function escapeHtml() {
  // Utility function
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Provides general utilities for string manipulation, path handling, and data formatting.</li>
</ul>
<h3>Output Module</h3>
<h4>HTML Output</h4>
<h5><code>output/html/htmlOutput.js</code></h5>
<p><strong>HTMLOutput Class</strong></p>
<pre><code class="language-javascript">class HTMLOutput {
  // Generates HTML documents
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Generates HTML pages for code analysis with syntax highlighting and navigable structures. Supports Mermaid diagrams.</li>
</ul>
<h5><code>output/html/htmlTemplate.js</code></h5>
<pre><code class="language-javascript">function createHTMLTemplate() {
  // Creates an HTML template
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Constructs HTML documents, loading necessary assets for rendering explanations.</li>
</ul>
<h5><code>output/html/_css.css</code></h5>
<ul>
<li><strong>Responsibilities</strong>: Styles the HTML documents, focusing on sidebars and syntax-highlighted code across devices.</li>
</ul>
<h5><code>output/html/_flowchart.js</code></h5>
<pre><code class="language-javascript">function initializeMermaid() {
  // Render Mermaid diagrams
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Manages rendering of Mermaid diagrams within HTML pages.</li>
</ul>
<h5><code>output/html/_js.js</code></h5>
<pre><code class="language-javascript">function initializeUI() {
  // Manages UI interactions
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Enhances UI with interactive features such as syntax highlighting and navigation.</li>
</ul>
<h4>PDF Output</h4>
<h5><code>output/pdf/pdfOutput.js</code></h5>
<p><strong>PDFOutput Class</strong></p>
<pre><code class="language-javascript">class PDFOutput {
  // Manages HTML to PDF conversion
}
</code></pre>
<ul>
<li><strong>Responsibilities</strong>: Converts HTML content, including code explanations and diagrams, into PDF format using Puppeteer.</li>
</ul>
<h2>Key Design Patterns and Architectural Decisions</h2>
<ul>
<li><strong>Module Segmentation</strong>: Code is divided into modules based on functionality (e.g., AI interaction, configuration, analysis).</li>
<li><strong>Caching</strong>: Implements caching to improve performance and manage API call limits.</li>
<li><strong>Configuration Management</strong>: Centralized through the <code>ConfigManager</code> class, ensuring consistency and flexibility.</li>
<li><strong>Dynamic Template Rendering</strong>: Uses <code>PromptManager</code> for customizable prompts enhancing AI explanations.</li>
<li><strong>Extensibility</strong>: Designed to support multiple AI providers and output formats, enabling future scalability.</li>
</ul>
<h2>Application Flow</h2>
<ol>
<li><strong>Input Handling</strong>: The process starts at <code>commands/explain.js</code>, which takes user inputs and configurations.</li>
<li><strong>Analysis and Explanation</strong>:<ul>
<li>Uses <code>CodeAnalyzer</code> for code file analysis.</li>
<li>Interacts with <code>AIEngine</code>, which employs AI models to generate explanations.</li>
</ul>
</li>
<li><strong>Output Generation</strong>:<ul>
<li>Utilizes <code>HTMLOutput</code> or <code>PDFOutput</code> to create desired documentation format.</li>
<li>Enhances results with flowcharts via <code>FlowchartGenerator</code>.</li>
</ul>
</li>
</ol>
<hr>
<p>This document provides a structural overview of the CodeExplain project, detailing critical components, their roles, and interactions, ensuring that it is accessible even to those new to software architecture and development concepts.</p>

                </div>
            </div>
        </div>
    </div>
</div>
    
                </div>
            </div>
        </main>

        
    </div>

    <!-- Non-critical scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js" defer></script>
    <!-- Load common programming languages for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/python.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/javascript.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/typescript.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/java.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cpp.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/csharp.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/ruby.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/go.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/rust.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/php.min.js" defer></script>
     <script src="https://cdn.jsdelivr.net/npm/marked@9.1.0/marked.min.js" defer></script>
     <script src="https://cdn.jsdelivr.net/npm/marked-highlight@2.1.0/lib/index.umd.js" defer></script>
     <script src="https://cdn.jsdelivr.net/npm/mermaid@11.0.0/dist/mermaid.min.js" defer></script>
